var library_all_games=[];function get_http(e,i){var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){4==this.readyState&&200==this.status&&i(this.responseText)},r.open("GET",e,!0),r.send(null)}function mod(e,i){return Math.round(e-Math.floor(e/i)*i)}function position_size(){$("#library_list").css("margin-left",mod($(document).width(),$(".library_app").width())/2)}function show_library(){var e=$.Deferred(),i=$("<div id='library_content'></div>");return $("#inner").after(i),i.append("<div id='library_list'><div id='library_list_loading'><img src='http://cdn.steamcommunity.com/public/images/login/throbber.gif'/>Loading</div></div>"),get_http("/steamlibrary/library.min.json",function(r){var t=JSON.parse(r);if(t.response&&Object.keys(t.response).length>0){(library_all_games=t.response.games).sort(function(e,i){return i.playtime_forever-e.playtime_forever});var a=function(e){var i=[];$("#library_list").html("<ul>"),$.each(library_all_games,function(r,t){if(t.name&&(void 0===e||new RegExp(e,"i").test(t.name))){if(0!=t.img_logo_url.length){var a="<li><a href='http://store.steampowered.com/app/"+t.appid+"' target=_blank class='library_app'>";a+="<div class='flip-container'>",a+="<div class='flipper'>",a+="<div class='front'><img src='http://media.steampowered.com/steamcommunity/public/images/apps/"+t.appid+"/"+t.img_logo_url+".jpg'>&nbsp;</div>",a+="<div class='back'>",a+="<p><strong>"+t.name+"</strong>",(null!=t.playtime_2weeks||null!=t.playtime_forever&&0!=t.playtime_forever)&&(a+="<br/>",null!=t.playtime_2weeks&&(a+=(t.playtime_2weeks/60).toFixed(2)+" h recente"),null!=t.playtime_2weeks&&null!=t.playtime_forever&&(a+=" / "),null!=t.playtime_forever&&(a+=(t.playtime_forever/60).toFixed(2)+" h total")),a+="</div></div></div>",$("#library_list").append(a+"</p></a></li>")}i.push(t)}})};$("#library_list").append("</ul>"),a(),$("#library_search").append("<input type='text' id='library_search_input' placeholder='Search'>"),$("#library_search").show(),$("#library_search_input").keyup(function(e){13!=e.which&&($(this).val()?a($(this).val()):a())}),$("#library_list_loading").remove(),e.resolve()}else $("#library_list_loading").remove(),i.html("<div id='library_private_profile'>"+localized_strings[language].library.private_profile+"</div>"),e.reject()}),e.promise()}